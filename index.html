<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Apex Style Guide : Developing Salesforce together">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Apex Style Guide</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/RapRec/Apex-Style-Guide">View on GitHub</a>

          <h1 id="project_title">Apex Style Guide</h1>
          <h2 id="project_tagline">Developing Salesforce together</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/RapRec/Apex-Style-Guide/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/RapRec/Apex-Style-Guide/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a id="rapid-recovery-apex-style-guide" class="anchor" href="#rapid-recovery-apex-style-guide" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Rapid Recovery Apex Style Guide</h1>



<ul>
<li>
<a href="#intro">Intro</a>

<ul>
<li><a href="#goals">Goals</a></li>
<li><a href="#sources">Sources</a></li>
</ul>
</li>
<li>
<a href="#basics">Basics</a>

<ul>
<li>
<a href="#special-characters">Special characters</a>

<ul>
<li><a href="#whitespace">Whitespace</a></li>
<li><a href="#special-escape-sequences">Special escape sequences</a></li>
<li><a href="#other-non-ascii-characters">Other Non-ASCII Characters</a></li>
</ul>
</li>
</ul>
</li>
<li>
<a href="#structure">Structure</a>

<ul>
<li><a href="#indentation">Indentation</a></li>
<li><a href="#new-lines-and-spaces">New-lines and spaces</a></li>
<li><a href="#prefer-explicit-declarations">Prefer Explicit Declarations</a></li>
<li><a href="#istest"><code>@isTest</code></a></li>
<li><a href="#capitalization">Capitalization</a></li>
<li><a href="#commenting">Commenting</a></li>
<li><a href="#example">Example</a></li>
</ul>
</li>
<li><a href="#soql">SOQL</a></li>
<li><a href="#apex-specific-sobject-constructor-syntax">Apex-Specific SObject Constructor Syntax</a></li>
<li><a href="#teststarttest-and-teststoptest">Test.startTest() and Test.stopTest()</a></li>
<li>
<a href="#naming-conventions">Naming Conventions</a>

<ul>
<li><a href="#class-and-trigger">Class and Trigger</a></li>
<li><a href="#methods">Methods</a></li>
<li><a href="#test-classes">Test classes</a></li>
</ul>
</li>
</ul>



<p><a name="intro"></a></p>

<h2>
<a id="intro" class="anchor" href="#intro" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Intro</h2>

<p>This document attempts to explain the basic styles and patterns that are used in the Rapid Recovery Salesforce codebase. New code should try to conform to these standards so that it is as easy to maintain as existing code. Of course every rule has an exception, but it's important to know the rules nonetheless. </p>

<p><a name="goals"></a></p>

<h3>
<a id="goals" class="anchor" href="#goals" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Goals</h3>

<p>The goal of this style guide is like that of any other style guide. Every developer has an opinion as to what makes a codebase clean, objective, and efficient, this style guide was founded on practiced principals within the <a href="http://salesforce.stackexchange.com/a/54678/10834">Salesforce community</a>, and collaborated on GitHub here: <a href="https://github.com/PolarisProject/salesforceStyleGuide">SalesforceStyleGuide</a>.  As long as there's some logic behind that beauty, no one is right or wrong.  But it's important to have a standard so that:</p>

<ol>
<li>New and old developers, and outside contractors of all sorts can easily read, understand and maintain our growing code base.</li>
<li>Code merges are easy to handle and are content-ful, not style-ful.</li>
</ol>

<p>See the Internet for more arguments about why style guides are important and useful things and not just a waste of time.</p>

<p><a name="sources"></a></p>

<h3>
<a id="sources" class="anchor" href="#sources" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Sources</h3>

<p>Since Apex is largely a Java and C# spin-off, this guide is founded on <a href="http://google-styleguide.googlecode.com/svn/trunk/javaguide.html">Google Java Style Guide</a> first, then C# where those do not apply. Anything not available from those sources is determined within the community and the dev team</p>

<p>This is still a living document so expect changes.</p>

<p><a name="basics"></a></p>

<h2>
<a id="basics" class="anchor" href="#basics" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Basics</h2>

<p><a name="special-characters"></a></p>

<h3>
<a id="special-characters" class="anchor" href="#special-characters" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Special characters</h3>

<p><a name="whitespace"></a></p>

<h4>
<a id="whitespace" class="anchor" href="#whitespace" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Whitespace</h4>

<p>The only permissible whitespace characters in source code are newline and space (0x20).  Inside of a string literal, only a space is allowed.  Line must not end with spaces (<code>/ +$/</code> must not match anything in the file).  Classes should all end with a newline.</p>

<p><a name="special-escape-sequences"></a></p>

<h4>
<a id="special-escape-sequences" class="anchor" href="#special-escape-sequences" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Special escape sequences</h4>

<p>For any character that has a special escape sequence (<code>\b</code>, <code>\t</code>, <code>\n</code>, <code>\f</code>, <code>\r</code>, <code>\"</code>, <code>\'</code> and <code>\\</code>), that sequence is used rather than the corresponding octal (e.g. <code>\012</code>) or Unicode (e.g. <code>\u000a</code>) escape.</p>

<p><a name="other-non-ascii-characters"></a></p>

<h4>
<a id="other-non-ascii-characters" class="anchor" href="#other-non-ascii-characters" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Other Non-ASCII Characters</h4>

<p>For the remaining non-ASCII characters, either the actual Unicode character (e.g. <code>âˆž</code>) or the equivalent Unicode escape (e.g. <code>\u221e</code>) is used, depending only on which makes the code easier to read and understand.</p>

<blockquote>
<p>Tip: In the Unicode escape case, and occasionally even when actual Unicode characters are used, an explanatory comment can be very helpful.</p>
</blockquote>

<p><a name="structure"></a></p>

<h2>
<a id="structure" class="anchor" href="#structure" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Structure</h2>

<p>The ordering of the members of a class can have a great effect on learnability, but there is no single correct recipe for how to do it. Different classes may order their members differently.</p>

<p>What is important is that each class order its members in some logical order, which its maintainer could explain if asked. For example, new methods are not just habitually added to the end of the class, as that would yield "chronological by date added" ordering, which is not a logical ordering.</p>

<p><a name="indentation"></a></p>

<h3>
<a id="indentation" class="anchor" href="#indentation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Indentation</h3>

<p>All blocks of code should be indented with 2 spaces.  Spaces, not tabs, to ensure that it looks the same on everyone's screen and doesn't waste horizontal space.</p>

<p><a name="new-lines-and-spaces"></a></p>

<h3>
<a id="new-lines-and-spaces" class="anchor" href="#new-lines-and-spaces" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>New-lines and spaces</h3>

<p>Use vertical whitespace as appropriate.  Don't be afraid to separate blocks of code.</p>

<p>Prefer placing comments on a line by themselves.</p>

<p>Open braces should have a space before them and not a newline.  The matching close brace should line up with the start of the opening brace's line.</p>

<p><code>else</code>s and <code>else if</code>s do not get a new-line before them.  Neither do <code>catch</code>es or <code>while</code>s in a <code>do...while</code> loop.</p>

<p>The parenthetical clause in <code>if</code>, <code>while</code>, <code>do</code>, <code>catch</code>, etc., statements should be preceded and followed by a single space.</p>

<p>In method definitions, there should be no space before the open parenthesis, and one space after.</p>

<p>In method calls and definitions, there should not be whitespace between the name of the method and the open parenthesis.</p>

<p>A single space should separate binary operators from the surrounding elements (e.g., <code>+</code>, <code>||</code>, <code>=</code>, <code>&gt;=</code>).  Unary operators (<code>!</code>, <code>-</code>) should be attached to their parameters.  A colon inside a <code>for each</code> loop (e.g., <code>for (Contact cnt : contacts) {</code>) should have one space on either side.  There should be no whitespace before commas, and one space after (e.g., <code>System.debug(LoggingLevel.INFO, 'fsdfs');</code>).</p>

<p>If using C#-style properties, code should follow the following rules:</p>

<ul>
<li>Always declare the getter, then the setter.</li>
<li>If there is no logic, it should read <code>{ get; set; }</code>.</li>
<li>If there is logic, there should be a new-line before each open-brace, and before and after each closed-brace.</li>
<li>If one clause has logic and one does not, place the clause without logic on its own line.</li>
</ul>

<p><a name="prefer-explicit-declarations"></a></p>

<h3>
<a id="prefer-explicit-declarations" class="anchor" href="#prefer-explicit-declarations" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Prefer Explicit Declarations</h3>

<p>Always specify:</p>

<ul>
<li>
<code>global</code>/<code>public</code>/<code>private</code> modifiers - prefer <code>private</code>, and if possible, <code>static</code>
</li>
<li>
<code>with sharing</code>/<code>without sharing</code>
</li>
<li>
<code>this</code> when calling local methods or setting local members/properties.</li>
</ul>

<p><a name="istest"></a></p>

<h3>
<a id="istest" class="anchor" href="#istest" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a><code>@isTest</code>
</h3>

<p>In a test method, use the <code>@isTest</code> attribute instead of the <code>testmethod</code> modifier.</p>

<p><a name="capitalization"></a></p>

<h3>
<a id="capitalization" class="anchor" href="#capitalization" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Capitalization</h3>

<p>We follow the Java standard of capitalization with the listed exceptions.  That means that statements (<code>for</code>, <code>if</code>, etc.) should be lowercase, constants should be <code>UPPER_CASE_WITH_UNDERSCORES</code>, classes and class-level variables should be declared as <code>UpperCamelCase</code>, and methods, parameters and local variables should all be declard as <code>lowerCamelCase</code>.</p>

<p>Native Apex methods and classes should generally be referenced as written in official Salesforce documentation.  This means that schemas and classes are <code>UpperCamelCase</code> and methods are <code>lowerCamelCase</code>.  The only deviation from this rule is <code>SObject</code> which should be written as such (in the documentation, it is usually written <code>sObject</code> which does not conform to this style guide and should not be used).</p>

<p>However, when referencing any metadata (SObject, SObjectField, FieldSet, Action, Class, Page, etc.), use the declared capitalization.  Even when referencing a method, field, etc., that is not capitalized according to these rules, still use the declared capitalization.</p>

<p><a name="commenting"></a></p>

<h3>
<a id="commenting" class="anchor" href="#commenting" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Commenting</h3>

<p>When commenting functions, the <code>JsDoc</code> doc style has been adapted to create a <code>RapRec</code> style. This uses the <code>/**</code> comment block and includes a function description followed by an empty line and the following tags respectively: <code>@author</code>, <code>@date</code>, <code>@context</code>, <code>@param</code>, <code>@return</code></p>

<p>The following example outlines a typical method comment block. </p>

<pre><code>/**
 * This is a test method, it does nothing
 *
 * @author     nworth
 * @date       21-Jul-2016
 * @context    public
 * @param      Map&lt;Id,Account&gt;  a
 * @param      List&lt;Contact&gt;    b
 * @return     void
 */
public void test(Map&lt;Id,Account&gt; a, List&lt;Contact&gt; b) {
   return a + b;
}
</code></pre>

<p><em><em>NOTE:</em> See <a href="http://kb.raprec.com/public/comment-style-guide-setup/">Comment Style Guide Setup</a> for a guide to setup the <a href="http://20tauri.free.fr/DoxyDoxygen/v2/page_overview.php">DoxyDoxygen</a> add-on for easy commenting</em></p>

<p><a name="example"></a></p>

<h3>
<a id="example" class="anchor" href="#example" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example</h3>

<div class="highlight highlight-source-java"><pre><span class="pl-k">public</span> <span class="pl-k">class</span> <span class="pl-en">MyClass</span> {

    <span class="pl-k">private</span> <span class="pl-smi">Contact</span> internallyUsedContact { get; set; }

    <span class="pl-k">public</span> <span class="pl-smi">Integer</span> calculatedInteger {
        get {
            <span class="pl-k">return</span> <span class="pl-c1">5</span>;
        }
        set {
            <span class="pl-v">this</span><span class="pl-k">.</span>internallyUsedContact <span class="pl-k">=</span> [<span class="pl-c1">SELECT</span> <span class="pl-smi">Id</span>
                <span class="pl-c1">FROM</span> <span class="pl-smi">Contact</span> 
                <span class="pl-c1">WHERE</span> <span class="pl-smi">Number_of_Peanuts__c</span> <span class="pl-k">&gt;</span> <span class="pl-k">:</span>value 
                <span class="pl-c1">LIMIT</span> <span class="pl-c1">1</span>
            ];
        }
    }

    <span class="pl-k">private</span> <span class="pl-smi">Id</span> contactId {
        get;
        set {
            <span class="pl-smi">System</span><span class="pl-k">.</span>debug(<span class="pl-s"><span class="pl-pds">'</span>Why do this?<span class="pl-pds">'</span></span>);
            <span class="pl-v">this</span><span class="pl-k">.</span>contactId <span class="pl-k">=</span> value;
        }
    }

    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">foo</span>(<span class="pl-smi">Integer</span> <span class="pl-v">bar</span>) {
        <span class="pl-k">if</span> (bar <span class="pl-k">==</span> <span class="pl-c1">3</span>) {
            <span class="pl-c">// Diane often asks when bar is 3.</span>
            <span class="pl-smi">System</span><span class="pl-k">.</span>debug(<span class="pl-v">this</span><span class="pl-k">.</span>debugCode(bar) <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">'</span> - hi there!<span class="pl-pds">'</span></span>);
            <span class="pl-k">return</span>;
        } <span class="pl-k">else</span> <span class="pl-k">if</span> (bar <span class="pl-k">&gt;</span> <span class="pl-c1">7</span>) {
            <span class="pl-k">List&lt;<span class="pl-smi">Integer</span>&gt;</span> wasteOfSpace <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-k">List&lt;<span class="pl-smi">Integer</span>&gt;</span>();
            <span class="pl-k">do</span> {
                wasteOfSpace<span class="pl-k">.</span>add(<span class="pl-v">this</span><span class="pl-k">.</span>calculatedInteger);
            } <span class="pl-k">while</span> (wasteOfSpace<span class="pl-k">.</span>size() <span class="pl-k">&lt;</span> <span class="pl-c1">5</span>);
        } <span class="pl-k">else</span> {
            <span class="pl-k">try</span> {
                <span class="pl-c1">UPSERT</span> v;
            } <span class="pl-k">catch</span> (<span class="pl-smi">Exception</span> ex) {
                handleException(ex);
            }
        }

        <span class="pl-k">for</span> (<span class="pl-smi">Integer</span> i <span class="pl-k">:</span> wasteOfSpace) {
            <span class="pl-smi">System</span><span class="pl-k">.</span>debug(<span class="pl-s"><span class="pl-pds">'</span>Here<span class="pl-cce">\'</span>s an integer! <span class="pl-pds">'</span></span> <span class="pl-k">+</span> i);
        }
    }

}</pre></div>

<p><a name="soql"></a></p>

<h2>
<a id="soql" class="anchor" href="#soql" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>SOQL</h2>

<p>In general, SOQL should be declared inline where it is used.  In some cases, like when referencing FieldSets, it's necessary to build SOQL queries dynamically.  The same rules will generally apply.</p>

<p>SOQL keywords (e.g., <code>SELECT</code>, <code>WHERE</code>, <code>TODAY</code>) should always be written in <code>ALL CAPS</code>.  Objects, fields and bind variables should be referenced as declared.  Each clause of the SOQL Query should be on its own line so that finding what changed in a diff is easier.  That is, each <code>SELECT</code>, <code>FROM</code>, <code>WHERE</code>, <code>AND</code>, <code>OR</code>, <code>GROUP BY</code>, <code>HAVING</code>, <code>ROLL UP</code>, <code>ORDER BY</code>, etc., with the exception of the first <code>SELECT</code> should start a new line.  That line should start in the same column as the most relevant <code>SELECT</code>.</p>

<p>Long lists of fields in a <code>SELECT</code> clause should be ordered in a logical manner and broken to fit within page width, with subsequent lines aligned with the first field.  Always select <code>Id</code>, and always select it first.</p>

<p>Example (in context):</p>

<pre><code>String typeToSelect = 'abcde';
List&lt;Contact&gt; cnts = [SELECT Id, FirstName, LastName, Phone, Email,
                             MailingCity, MailingState,
                             (SELECT Id, ActivityDate, Origin, Type,
                                     WhatId, What.Name, RecordTypeId
                              FROM ActivityHistories
                              WHERE Type = :typeToSelect)
                      FROM Contact
                      WHERE CreatedDate &gt;= TODAY];
</code></pre>

<p><a name="apex-specific-sobject-constructor-syntax"></a></p>

<h2>
<a id="apex-specific-sobject-constructor-syntax" class="anchor" href="#apex-specific-sobject-constructor-syntax" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Apex-Specific SObject Constructor Syntax</h2>

<p>When creating an SObject, generally prefer the Apex-specific syntax wherein all fields can be initialized from the constructor.  When using this syntax, choose a different line for each property so that diff-ing and versioning is easier.</p>

<p>Example:</p>

<pre><code>Contact c = new Contact(RecordTypeId = CONTACT_RECORDTYPE_ID,
                        FirstName = firstName,
                        LastName = surname,
                        MailingCountry = DEFAULT_COUNTRY
                       );
</code></pre>

<p><a name="teststarttest-and-teststoptest"></a></p>

<h2>
<a id="teststarttest-and-teststoptest" class="anchor" href="#teststarttest-and-teststoptest" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Test.startTest() and Test.stopTest()</h2>

<p>When writing test cases, always use <code>Test.startTest();</code> and <code>Test.stopTest();</code>.  Do not indent the code between those method calls, but do use one line of vertical whitespace above and below those method calls to seprate those lines from surrounding code.</p>

<p><a name="naming-conventions"></a></p>

<h2>
<a id="naming-conventions" class="anchor" href="#naming-conventions" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Naming Conventions</h2>

<p>All method name should reflect the scope of the method itself with respect to its namespace. Method names should not be derived by the feature scope or overarching functionality.</p>

<h4>
<a id="private" class="anchor" href="#private" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Private</h4>

<p>If a method is private to its class then it should be prefixed with an underscore (<code>_</code>).</p>

<h4>
<a id="boolean" class="anchor" href="#boolean" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Boolean</h4>

<p>If the method is returning a <code>Boolean</code> response, then it should be prefixed with <code>is</code> or <code>has</code></p>

<p><a name="class-and-trigger"></a></p>

<h3>
<a id="class-and-trigger" class="anchor" href="#class-and-trigger" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Class and Trigger</h3>

<p>Name a class or trigger after what it does.  Triggers should be verbs and end with <code>Trigger</code> (e.g., <code>SyncCaseToplineWithDescriptionTrigger</code>).  Controllers and Controller Extensions should end with the word <code>Controller</code>.</p>

<p><a name="methods"></a></p>

<h3>
<a id="methods" class="anchor" href="#methods" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Methods</h3>

<p>Methods should all be verbs.  Getters and setters should have no side effects (with the exception of setting up cached values and/or logging), and should begin with <code>get</code> or <code>set</code>.</p>

<p><a name="test-classes"></a></p>

<h3>
<a id="test-classes" class="anchor" href="#test-classes" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Test classes</h3>

<p>Test classes should be named <code>TEST_ClassUnderTest</code>.  If the test is not a unit-level test but instead a broader test case, it it should be named <code>TEST_StuffThatsGenerallyBeingTested</code>.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Apex Style Guide maintained by <a href="https://github.com/RapRec">RapRec</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
